# https://realpython.com/beautiful-soup-web-scraper-python/

import requests
from bs4 import BeautifulSoup
import pandas as pd

# instatiate lists to append to for dataframe/csv
title = []
company = []
location = []
# distance = []
URL_add = []

# instantiate website
URL = "https://www.monster.com/jobs/search/?q=Software-Developer&where=Netherlands"

# retrieve HTML of website
page = requests.get(URL)

# create Beautiful Soup object that takes scraped HTML content as input and use appropriate parser
soup = BeautifulSoup(page.content, "html.parser")

# find specific element by id - get all HTML contained within the <div> (identify by inpecting the HTML on the website with CTRL + SHIFT + I in Chrome; look for <div id = "  ">
results = soup.find(id="ResultsContainer")
# easy viewing by printing all the HTML
# print(results.prettify())

# find elements by HTM class name
job_elems = results.find_all("section", class_="card-content")

# iterate over job_elems to look at specific details of each one
# !! trailing underscore: class is a keyword, cannot be used as an argument name. hence add a trailing underscore (f you leave it out Python will throw you an exception as it thinks you're trying to instantiate a new class.)
for job_elem in job_elems:
    # print(job_elem, end="\n" * 2)

    title_elem = job_elem.find("h2", class_="title")  # job_elem = type(class 'bs4.element.Tag') ; title_elem = type(class 'bs4.element.Tag')
    company_elem = job_elem.find("div", class_="company")
    location_elem = job_elem.find("div", class_="location")

    URL_elem = job_elem.find_all("a", href=True)
    for el in URL_elem:
        URL_add.append(el["href"])

# solve "AttributeError: 'NoneType' object has no attribute 'text'": sommige items hebben value None
    if None in (title_elem, company_elem, location_elem, URL_elem):
        continue

# printing the normal way returns all HTML, we only want the text content
    print("Title: ", title_elem.text.strip()) # title_elem = type (str)
    print("Company: ", company_elem.text.strip())
    print("Location: ", location_elem.text.strip())
    print("URL: ", el["href"])
    print()
print("Totaal aantal advertenties:", len(job_elems))
